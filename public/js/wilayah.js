window.wilayah = [
  {
    prov: "DKI Jakarta",
    kota: [
      {
        nama: "Kepulauan Seribu",
        kec: [
          "Kepulauan Seribu Selatan",
          "Kepulauan Seribu Utara"
        ]
      },
      {
        nama: "Jakarta Pusat",
        kec: [
          "Cempaka Putih",
          "Gambir",
          "Johar Baru",
          "Kemayoran",
          "Menteng",
          "Sawah Besar",
          "Senen",
          "Tanah Abang"
        ]
      },
      {
        nama: "Jakarta Utara",
        kec: [
          "Cilincing",
          "Kelapa Gading",
          "Koja",
          "Pademangan",
          "Penjaringan",
          "Tanjung Priok"
        ]
      },
      {
        nama: "Jakarta Barat",
        kec: [
          "Cengkareng",
          "Grogol Petamburan",
          "Kalideres",
          "Kebon Jeruk",
          "Kembangan",
          "Palmerah",
          "Taman Sari",
          "Tambora"
        ]
      },
      {
        nama: "Jakarta Selatan",
        kec: [
          "Cilandak",
          "Jagakarsa",
          "Kebayoran Baru",
          "Kebayoran Lama",
          "Mampang Prapatan",
          "Pancoran",
          "Pasar Minggu",
          "Pesanggrahan",
          "Setiabudi",
          "Tebet"
        ]
      },
      {
        nama: "Jakarta Timur",
        kec: [
          "Cakung",
          "Cipayung",
          "Ciracas",
          "Duren Sawit",
          "Jatinegara",
          "Kramat Jati",
          "Makasar",
          "Matraman",
          "Pasar Rebo",
          "Pulo Gadung"
        ]
      }
    ]
  },

  {
    prov: "Banten",
    kota: [
      {
        nama: "Kabupaten Pandeglang",
        kec: [
          "Angsana","Banjar","Bojong","Cadasari","Carita","Cibaliung","Cibitung",
          "Cigeulis","Cikedal","Cikeusik","Cimanggu","Cimanuk","Cipeucang",
          "Cisata","Jiput","Kaduhejo","Karang Tanjung","Koroncong","Labuan",
          "Majasari","Mandalawangi","Mekarjaya","Menes","Munjul","Pagelaran",
          "Pandeglang","Panimbang","Patia","Picung","Pulosari","Saketi",
          "Sindangresmi","Sobang","Sukaresmi","Sumur"
        ]
      },
      {
        nama: "Kabupaten Lebak",
        kec: [
          "Banjarsari","Bayah","Bojongmanik","Cibadak","Cibeber","Cigemblong",
          "Cihara","Cijaku","Cikulur","Cileles","Cilograng","Cimarga","Cipanas",
          "Cirinten","Curugbitung","Gunung Kencana","Kalanganyar","Lebakgedong",
          "Leuwidamar","Maja","Malingping","Muncang","Panggarangan",
          "Rangkasbitung","Sajira","Sobang","Wanasalam","Warunggunung"
        ]
      },
      {
        nama: "Kabupaten Tangerang",
        kec: [
          "Balaraja","Cikupa","Cisauk","Cisoka","Curug","Gunung Kaler","Jambe",
          "Jayanti","Kelapa Dua","Kemiri","Kosambi","Kresek","Kronjo","Legok",
          "Mauk","Mekar Baru","Pagedangan","Pakuhaji","Panongan","Pasar Kemis",
          "Rajeg","Sepatan","Sepatan Timur","Sindang Jaya","Solear","Sukadiri",
          "Sukamulya","Teluknaga","Tigaraksa"
        ]
      },
      {
        nama: "Kabupaten Serang",
        kec: [
          "Anyar","Bandung","Baros","Binuang","Bojonegara","Carenang","Cikande",
          "Cikeusal","Cinangka","Ciomas","Ciruas","Gunungsari","Jawilan","Kibin",
          "Kopo","Kragilan","Kramatwatu","Lebakwangi","Mancak","Pabuaran",
          "Padarincang","Petir","Pontang","Pulo Ampel","Tanara","Tirtayasa",
          "Tunjung Teja","Waringinkurung"
        ]
      },
      {
        nama: "Kota Tangerang",
        kec: [
          "Batuceper","Benda","Cibodas","Ciledug","Cipondoh","Jatiuwung",
          "Karangtengah","Karawaci","Larangan","Neglasari","Periuk","Pinang",
          "Tangerang"
        ]
      },
      {
        nama: "Kota Tangerang Selatan",
        kec: [
          "Ciputat","Ciputat Timur","Pamulang","Pondok Aren","Serpong",
          "Serpong Utara","Setu"
        ]
      },
      {
        nama: "Kota Serang",
        kec: [
          "Cipocok Jaya","Curug","Kasemen","Serang","Taktakan","Walantaka"
        ]
      },
      {
        nama: "Kota Cilegon",
        kec: [
          "Cibeber","Cilegon","Citangkil","Ciwandan","Gerogol",
          "Jombang","Pulomerak","Purwakarta"
        ]
      }
    ]
  },

  {
  prov: "Jawa Barat",
  kota: [
    {
      nama: "Kabupaten Bogor",
      kec: [
        "Babakan Madang","Bojonggede","Caringin","Cariu","Ciampea","Ciawi",
        "Cibinong","Cibungbulang","Cigombong","Cigudeg","Cijeruk","Cileungsi",
        "Ciomas","Cisarua","Ciseeng","Citeureup","Dramaga","Gunung Putri",
        "Gunung Sindur","Jasinga","Jonggol","Kemang","Klapanunggal",
        "Leuwiliang","Leuwisadeng","Megamendung","Nanggung","Pamijahan",
        "Parung","Parung Panjang","Ranca Bungur","Rumpin","Sukajaya",
        "Sukamakmur","Sukaraja","Tajurhalang","Tamansari","Tanjungsari",
        "Tenjo","Tenjolaya"
      ]
    },
    {
      nama: "Kabupaten Sukabumi",
      kec: [
        "Bantargadung","Bojonggenteng","Caringin","Ciambar","Cibadak",
        "Cibitung","Cicantayan","Cicurug","Cidadap","Cidahu","Cidolog",
        "Ciemas","Cikakak","Cikembar","Cikidang","Cimanggu","Ciracap",
        "Cireunghas","Cisaat","Cisolok","Curugkembar","Gegerbitung",
        "Gunungguruh","Jampang Kulon","Jampang Tengah","Kalapanunggal",
        "Kebonpedes","Lengkong","Nagrak","Nyalindung","Pabuaran",
        "Parakansalak","Parungkuda","Purabaya","Sagaranten","Simpenan",
        "Sukabumi","Sukalarang","Sukaraja","Surade","Tegalbuleud",
        "Waluran","Warungkiara"
      ]
    },
    {
      nama: "Kabupaten Cianjur",
      kec: [
        "Agrabinta","Bojongpicung","Campaka","Campaka Mulya","Cianjur",
        "Cibeber","Cibinong","Cidaun","Cijati","Cikadu","Cikalongkulon",
        "Cilaku","Cipanas","Ciranjang","Cugenang","Gekbrong","Haurwangi",
        "Kadupandak","Karangtengah","Leles","Mande","Naringgul","Pacet",
        "Pagelaran","Pasirkuda","Sindangbarang","Sukaluyu","Sukanagara",
        "Takokak","Tanggeung","Warungkondang"
      ]
    },
    {
      nama: "Kabupaten Bandung",
      kec: [
        "Arjasari","Baleendah","Banjaran","Bojongsoang","Cangkuang",
        "Cicalengka","Cikancung","Cilengkrang","Cileunyi","Cimaung",
        "Cimenyan","Ciparay","Ciwidey","Dayeuhkolot","Ibun","Katapang",
        "Kertasari","Kutawaringin","Majalaya","Margaasih","Margahayu",
        "Nagreg","Pacet","Pameungpeuk","Pangalengan","Paseh","Pasirjambu",
        "Rancabali","Rancaekek","Solokanjeruk","Soreang"
      ]
    },
    {
      nama: "Kabupaten Garut",
      kec: [
        "Banjarwangi","Banyuresmi","Bayongbong","Blimbing","Bungbulang",
        "Caringin","Cibalong","Cibatu","Cibiuk","Cigedug","Cihurip",
        "Cikajang","Cikelet","Cilawu","Cisewu","Cisompet","Cisurupan",
        "Garut Kota","Kadungora","Karangpawitan","Karangtengah",
        "Kersamanah","Leles","Leuwigoong","Malangbong","Mekarmukti",
        "Pakenjeng","Pameungpeuk","Pamulihan","Pangatikan","Pasirwangi",
        "Peundeuy","Samarang","Selawi","Singajaya","Sucinaraja",
        "Sukaresmi","Sukawening","Talegong","Tarogong Kaler",
        "Tarogong Kidul","Wanaraja"
      ]
    },

    {
      nama: "Kabupaten Tasikmalaya",
      kec: [
        "Bantarkalong","Bojongasih","Bojonggambir","Ciawi","Cibalong",
        "Cigalontang","Cikalong","Cikatomas","Cineam","Cipatujah",
        "Cisayong","Culamega","Gunung Tanjung","Jamanis","Jatiwaras",
        "Kadipaten","Karangjaya","Leuwisari","Mangunreja","Manonjaya",
        "Padakembang","Pagerageung","Pancatengah","Parungponteng",
        "Puspahiang","Rajapolah","Salawu","Salopa","Sariwangi",
        "Singaparna","Sodonghilir","Sukahening","Sukaraja","Sukarame",
        "Tanjungjaya","Taraju"
      ]
    },

    {
      nama: "Kabupaten Ciamis",
      kec: [
        "Banjarsari","Baregbeg","Ciamis","Cidolog","Cihaurbeuti",
        "Cijeungjing","Cikoneng","Cimaragas","Cipaku","Cisaga",
        "Jatinagara","Kawali","Lakbok","Lumbung","Pamarican",
        "Panawangan","Panumbangan","Purwadadi","Rajadesa","Rancah",
        "Sadananya","Sindangkasih","Sukadana","Sukamantri","Tambaksari"
      ]
    },

    {
      nama: "Kabupaten Kuningan",
      kec: [
        "Ciawigebang","Cibeureum","Cibingbin","Cidahu","Cigandamekar",
        "Cigugur","Cilebak","Cilimus","Cimahi","Ciniru","Cipicung",
        "Ciwaru","Darma","Garawangi","Hantara","Jalaksana","Japara",
        "Kadugede","Kalimanggis","Karangkancana","Kramatmulya",
        "Kuningan","Lebakwangi","Luragung","Maleber","Mandirancan",
        "Nusaherang","Pancalang","Pasawahan","Selajambe",
        "Sindangagung","Subang"
      ]
    },

    {
      nama: "Kabupaten Cirebon",
      kec: [
        "Arjawinangun","Astanajapura","Babakan","Beber","Ciledug",
        "Depok","Dukupuntang","Gebang","Gegesik","Gempol","Greged",
        "Gunungjati","Jamblang","Kaliwedi","Kapetakan","Karangsembung",
        "Karangwareng","Kedawung","Klangenan","Lemahabang","Losari",
        "Mundu","Pabedilan","Pabuaran","Palimanan","Pangenan",
        "Panguragan","Pasaleman","Plumbon","Sedong","Sumber",
        "Suranenggala","Susukan","Susukan Lebak","Talun",
        "Tengah Tani","Waled","Weru"
      ]
    },

    {
      nama: "Kabupaten Majalengka",
      kec: [
        "Argapura","Banjaran","Bantarujeg","Cigasong","Cikijing",
        "Cingambul","Dawuan","Jatitujuh","Jatiwangi","Kadipaten",
        "Kasokandel","Kertajati","Lemahsugih","Leuwimunding","Ligung",
        "Maja","Majalengka","Malausma","Palasah","Panyingkiran",
        "Rajagaluh","Sindang","Sindangwangi","Sukahaji",
        "Sumberjaya","Talaga"
      ]
    },

    {
      nama: "Kabupaten Sumedang",
      kec: [
        "Buahdua","Cibugel","Cimalaka","Cimanggung","Cisarua","Cisitu",
        "Conggeang","Darmaraja","Ganeas","Jatigede","Jatinangor",
        "Jatinunggal","Pamulihan","Rancakalong","Situraja","Sukasari",
        "Sumedang Selatan","Sumedang Utara","Surian","Tanjungkerta",
        "Tanjungmedar","Tanjungsari","Tomo","Ujungjaya","Wado"
      ]
    },

    {
      nama: "Kabupaten Indramayu",
      kec: [
        "Anjatan","Arahan","Balongan","Bangodua","Bongas","Cantigi",
        "Cikedung","Gabuswetan","Gantar","Haurgeulis","Indramayu",
        "Jatibarang","Juntinyuat","Kandanghaur","Karangampel",
        "Kedokan Bunder","Kertasemaya","Krangkeng","Kroya","Lelea",
        "Lohbener","Losarang","Pasekan","Patrol","Sindang","Sliyeg",
        "Sukagumiwang","Sukra","Trisi","Tukdana","Widasari"
      ]
    },

    {
      nama: "Kabupaten Subang",
      kec: [
        "Binong","Blanakan","Ciasem","Ciater","Cibogo","Cijambe",
        "Cikaum","Cipeundeuy","Cipunagara","Cisalak","Compreng",
        "Dawuan","Jalancagak","Kalijati","Kasomalang","Legonkulon",
        "Pabuaran","Pagaden","Pagaden Barat","Pamanukan","Patokbeusi",
        "Purwadadi","Pusakanagara","Pusakajaya","Sagalaherang",
        "Serangpanjang","Subang","Sukasari","Tambakdahan",
        "Tanjungsiang"
      ]
    },

    {
      nama: "Kabupaten Purwakarta",
      kec: [
        "Babakancikao","Bojong","Bungursari","Campaka","Cibatu",
        "Darangdan","Jatiluhur","Kiarapedes","Maniis","Pasawahan",
        "Plered","Pondoksalam","Purwakarta","Sukasari","Sukatani",
        "Tegalwaru","Wanayasa"
      ]
    },

    {
      nama: "Kabupaten Karawang",
      kec: [
        "Banyusari","Batujaya","Ciampel","Cibuaya","Cikampek",
        "Cilamaya Kulon","Cilamaya Wetan","Cilebar","Jatisari",
        "Jayakerta","Karawang Barat","Karawang Timur","Klari",
        "Kotabaru","Kutawaluya","Lemahabang","Majalaya","Pakisjaya",
        "Pangkalan","Pedes","Purwasari","Rawamerta","Rengasdengklok",
        "Talagasari","Tegalwaru","Telukjambe Barat",
        "Telukjambe Timur","Tempuran","Tirtajaya","Tirtamulya"
      ]
    },

    {
      nama: "Kabupaten Bekasi",
      kec: [
        "Babelan","Bojongmangu","Cabangbungin","Cibarusah","Cibitung",
        "Cikarang Barat","Cikarang Pusat","Cikarang Selatan",
        "Cikarang Timur","Cikarang Utara","Karangbahagia",
        "Kedungwaringin","Muara Gembong","Pebayuran","Serang Baru",
        "Setu","Sukakarya","Sukatani","Sukawangi","Tambelang",
        "Tambun Selatan","Tambun Utara","Tarumajaya"
      ]
    },

    {
      nama: "Kota Bogor",
      kec: [
        "Bogor Barat","Bogor Selatan","Bogor Tengah",
        "Bogor Timur","Bogor Utara","Tanah Sareal"
      ]
    },
    {
      nama: "Kota Sukabumi",
      kec: [
        "Baros","Cibeureum","Cikole","Citamiang",
        "Gunungpuyuh","Lembursitu","Warudoyong"
      ]
    },
    {
      nama: "Kota Bandung",
      kec: [
        "Andir","Antapani","Arcamanik","Astanaanyar",
        "Babakan Ciparay","Bandung Kidul","Bandung Kulon",
        "Bandung Wetan","Batununggal","Bojongloa Kaler",
        "Bojongloa Kidul","Buahbatu","Cibeunying Kaler",
        "Cibeunying Kidul","Cibiru","Cicendo","Cidadap",
        "Cinambo","Coblong","Gedebage","Kiaracondong",
        "Lengkong","Mandalajati","Panyileukan","Rancasari",
        "Regol","Sukajadi","Sukasari","Sumur Bandung",
        "Ujungberung"
      ]
    },
    {
      nama: "Kota Cirebon",
      kec: [
        "Harjamukti","Kejaksan","Kesambi",
        "Lemahwungkuk","Pekalipan"
      ]
    },
    {
      nama: "Kota Bekasi",
      kec: [
        "Bantargebang","Bekasi Barat","Bekasi Selatan",
        "Bekasi Timur","Bekasi Utara","Jatiasih",
        "Jatisampurna","Medansatria","Mustikajaya",
        "Pondokgede","Pondokmelati","Rawalumbu"
      ]
    },
    {
      nama: "Kota Depok",
      kec: [
        "Beji","Bojongsari","Cilodong","Cimanggis",
        "Cinere","Cipayung","Limo","Pancoran Mas",
        "Sawangan","Sukmajaya","Tapos"
      ]
    },
    {
      nama: "Kota Cimahi",
      kec: [
        "Cimahi Selatan","Cimahi Tengah","Cimahi Utara"
      ]
    },
    {
      nama: "Kota Tasikmalaya",
      kec: [
        "Bungursari","Cibeureum","Cihideung","Cipedes",
        "Indihiang","Kawalu","Mangkubumi",
        "Purbaratu","Tamansari","Tawang"
      ]
    },
    {
      nama: "Kota Banjar",
      kec: [
        "Banjar","Langensari","Pataruman","Purwaharja"
      ]
    }
  ]
}
];

document.addEventListener("DOMContentLoaded", function () {

    if (!window.wilayah || !Array.isArray(window.wilayah)) {
        console.error("❌ window.wilayah tidak ditemukan");
        return;
    }

    const prov = document.getElementById("provinsi");
    const kota = document.getElementById("kota");
    const kec  = document.getElementById("kecamatan");

    if (!prov || !kota || !kec) return;

    const oldProv = prov.dataset.old || "";
    const oldKota = kota.dataset.old || "";
    const oldKec  = kec.dataset.old || "";

    const reset = (el, label) => {
        el.innerHTML = `<option value="">${label}</option>`;
    };

    /* ==== PROVINSI ==== */
    reset(prov, "Pilih Provinsi");
    window.wilayah.forEach(w => {
        prov.innerHTML += `<option value="${w.prov}">${w.prov}</option>`;
    });

    if (oldProv) prov.value = oldProv;

    function loadKota() {
        reset(kota, "Pilih Kota / Kabupaten");
        reset(kec, "Pilih Kecamatan");

        const p = window.wilayah.find(w => w.prov === prov.value);
        if (!p) return;

        p.kota.forEach(k => {
            kota.innerHTML += `<option value="${k.nama}">${k.nama}</option>`;
        });

        if (oldKota) kota.value = oldKota;
        loadKec();
    }

    function loadKec() {
        reset(kec, "Pilih Kecamatan");

        const p = window.wilayah.find(w => w.prov === prov.value);
        if (!p) return;

        const k = p.kota.find(x => x.nama === kota.value);
        if (!k) return;

        k.kec.forEach(c => {
            kec.innerHTML += `<option value="${c}">${c}</option>`;
        });

        if (oldKec) kec.value = oldKec;
    }

    prov.addEventListener("change", loadKota);
    kota.addEventListener("change", loadKec);

    if (oldProv) loadKota();
});
